---

layout: post

title: Learn Python the Hard Way 03-学习笔记

date: 2017-10-30

author: Zd

catalog: true

categories: Python

tags:
    - LPTHW
    - Python

---

#### 写在前面

本系列笔记是个人的学习心得，可能存在错误或不严谨之处，仅供参考。若发现错误或不严谨之处，欢迎告诉我(idonald@live.com)。谢谢。

# 原标题：数字和数学计算

## 1. 知识点介绍

## 1.1. 数学运算符号

既然是数学计算，首先认识一下数学运算符号。Python 有 7 种运算类型，以下是常见运算所用到的运算符。在运算中，如`10 + 5 = 15`，10 和 5 称为操作数，`+`称为运算符。

```
+ 加号
- 减号
／ 除号
* 乘号
% 模除（就是取余运算）
< 小于号
> 大于号
<= 小于等于号
>= 大于等于号
```





## 2. 原文代码

```
print "I will now count my chickens:"

print "Hens", 25 + 30 / 6
print "Roosters", 100 - 25 * 3 % 4

print "Now I will count the eggs:"

print 3 + 2 + 1 - 5 + 4 % 2 - 1 / 4 + 6

print "Is it true that 3 + 2 < 5 - 7?"

print 3 + 2 < 5 - 7

print "What is 3 + 2?", 3 + 2
print "What is 5 - 7?", 5 - 7

print "oh, that's why it's False."

print "How about same more."

print "Is it greater?", 5 > -2
print "Is it greater or equal?", 5 >= -2
print "Is it less or equal?", 5 <= -2
```

### 输出结果

```
I will now count my chickens:
Hens 30
Roosters 97
Now I will count the eggs:
7
Is it true that 3 + 2 < 5 - 7?
False
What is 3 + 2? 5
What is 5 - 7? -2
Oh, that's why it's False.
How about some more.
Is it greater? True
Is it greater or equal? True
Is it less or equal? False
```

## 3. 知识之树

## 3.1. 七种运算符类型

Python 语言支持以下类型的运算符：

```
算术运算符
比较（关系）运算符
赋值运算符
逻辑运算符
按位运算符
成员运算符
身份运算符
```

下面列出前四种，因为这四种运算在基础阶段也经常使用。除了特别说明，以下进行运算的数字仅为示例。

### 3.1.1. 算术运算符

算术运算符，就是用来进行数学计算的符号，按常识来理解就好。

|运算符   |描述                             |示例         |
|:------:|:-------------------------------|:-----------|
|+       |加法                             |2 + 3 = 5   |
|-       |减法                             |8 - 2 = 6   |
|*       |乘法                             |2 * 3 = 6   |
|/       |除法                             |8 / 2 = 4   |
|%       |模运算，模除，就是取余              |9 % 2 = 1   |
|**      |幂算，就是指数计算                  |3 ** 4：表示3的4次幂|
|//      |地板除，简单说就是只保留小数点前的结果 |9 // 4 = 2，9.0 // 2.0 = 4.0 |

上面多数符号都很好理解，简单介绍除号 /、模除号 % 和幂算号**。

#### 除号：/

符号「/」是除号，虽然除法属于数学四则运算，几乎算是常识了，但对于计算机来说，除法有点特别，举例来说，10/8=？ 计算一下，我们会得出 1.25。而通过计算机计算，我们看到的结果很可能是 1，而不是 1.25。为什么呢？这里需要了解一下计算机数字的基本知识。

计算机世界里，数字主要分为整型与浮点型，整型就是整数，即不带小数点的数字，浮点型就是带小数点的数字，二者区别主要是计算机存储空间分配原理的差异所致，可以这么理解，对于小数点前和小数点后的数字，需要计算机分别分配一个存储空间，计算机为整型数字只分配了一个用于存储小数点前的空间。在非特指的情况下，计算机默认状态是整型。

在这个状态下，计算机计算 10/8 时，计算机会默认忽略小数点后面的数字，给我们返回小数点前面的数字，也就是数字：1。

因为小数点后的数字被直接抛弃，这会带来一个好玩的事情。我们先计算 10/8，将得到的结果再乘以 8，常识告诉我们，最终结果是 10，对不对？

对计算机来说，它不一定认同我们这个想法。实际上，整型状态下的计算机给我们返回的值是 8。原因是 10/8，结果为 1，1 乘以 8 等于 8。这种结果可能会让人感到困惑，找些资料多了解计算机的数据类型与存储原理，这样才能进一步理解这种事情的内在原理。

#### 模除：%

符号「%」值得加以解释，它是一个百分号，在 Python 规范中，一般情况下，它也是一个用来进行`取余运算`的符号。特殊情况下呢？这个有待以后深入学习，值得另行写一篇笔记。

模除（取余）就是 A 除以 B，不够除尽所余下的数字，比如 9 除 4，得 2 余 1，那么 9 % 4，输出的结果为 1。

>注意，上述数学运算符号必须是英文输入状态下的符号，如果输入中文输入状态下的符号，运算会出错。实际上，绝多数情况下，所有字符都必须是英文状态下的符号（例外情况是字符串里的内容）。

#### 幂算: **

幂算就是指数计算，就是数学知识。这里有一个小知识，在 Python 程序里的表示符号是使用两个乘号`**`，不过在其它非程序的场景中，除了在右上角写上指数的数字外，幂算的符号通常使用一个上标的小三角号`^`来表示，比如`3^2`表示 3 的平方（即 2 次方），`3^4`表示 3 的 4 次方。

### 3.1.2. 比较运算符

简单说，就是比大小。

|运算符 |描述                                  |示例              |
|:----:| :-----------------------------------|:-----------------|
|==    |若运算符两端的值相等，则判断为真，否则为假  |2 == 3，结果为false |
|!=    |若运算符两端的值不等，则为真，否则为假     |2 != 3，结果为true  |
|>     |若左边大于右边，则为真，否则为假          |5 > 3，结果为true   |
|<     |若左边小于右边，则为真，否则为假          |8 < 2，结果为false  |
|>=    |若左边大于或等于右边，则为真，否则为假     |4 >= 4，结果为true  |
|<=    |若左边小于或等于右边，则为真，否则为假     |11 <= 7，结果为false|

比较运算所返回的 True（名称：真值），和 False（假值）是一种特别的数据类型的值，叫布尔类型(BOOL)，或布尔值，它只有两个值，要么是 True，要么是 False，而且 Python 规定这两个值的首字母必须大写。同时，在 Python 里，True 和 False 是被设定了具体的值的，True = 1，False = 0。

比较运算可用来对某些条件的真假进行判断，以此判断是否执行指定的代码。比方说，每天一到早晨 6 点半，我就起床，这里可以用`==`来判断时间是不是早晨的 6 点半，如果刚好 6 点半，那我的床就会自动跳起来，让我没法继续睡觉，比方说判定一个人是不是未成年，a 是年龄：

```
if a >= 18:
    print "Adult"
else:
    print "Not Adult"
```

### 3.1.3. 赋值运算符

假定变量 a 的值为 5，变量 b 的值为 10。如果不理解什么是变量，可以暂时不纠结这个概念。

|运算符 |描述                              |示例                       |
|:----:| :-------------------------------|:-------------------------|
|=     |将右端操作数的值赋给左端             |c = a + b，结果是c = 15     |
|+=    |将右端值加到左端，再把结果赋给左端     |c += b 等价于 c = c + b    |
|-=    |将左端值减去右端，再把结果赋给左端     |c -= b 等价于 c = c - b    |
|*=    |将右端与左端相乘，再把结果赋给左端     |c `*=` a 等价于 c = c * a  |
|/=    |将左端除以右端，再把结果赋给左端       |c /= a 等价于 c = c / a    |
|%=    |将左端除以右端的模数，再把结果赋给左端  |c %= a 等价于 c = c % a    |
|`**=` |进行指数计算，再把结果赋给左端        |c `**=` a 等价于 c = c ** a |
|//=   |进行地板除，再把结果赋给左端          |c //= a 等价于 c = c // a   |

### 3.1.4. 逻辑运算符

假定变量 a 的值为 True，变量 b 的值为 False。

|运算符 |描述                           |示例                       |
|:----:| :----------------------------|:--------------------------|
|and   |两端皆真，则为真，否则为假         |a and b 的结果为False     |
|or    |任意非假，则为真，全假为假         |a or b 的结果为True      |
|not   |用于反转指定的结果，真变假，假变真  |not(a and b)的结果为True  |

可以看到，除了比较运算，逻辑运算也用到了布尔值：True 和 False。两种运算各有相应的使用场景，也可以组合起来实现更复杂的条件判断。

## 3.2. 运算符优先级

上述那么多符号，一起出现时哪个先算，哪个后算？这就是运算符优先级的概念，Python 对此作了规定。下表包括七种类型的运算符。

|优先级  |运算符                              |描述                      |
|:-----:| :---------------------------------|:-------------------------|
|1     |`**`                               |指数（最高优先级）            |
|2     |`~``+``-`                       |按位翻转。一元加号和减号(称为+@，-@)|
|3     |`*``/``%``//`                      |乘、除、取模、取整除（地板除）  |
|4     |`+``-`                             |加、减                      |
|5     |`>>``<<`                           |右移、左移运算符             |
|6     |`&`                                |位运算符`AND`，与门          |
|7     |`^``|`                             |位运算符                    |
|8     |`<=``<``>``>=`                     |比较运算符                  |
|9     |`<>``==``!=`                       |等于运算符                  |
|10    |`=``%=``/=``//=``-=``+=``*=``**=`  |赋值运算符                  |
|11    |`is``is not`                       |身份运算符                  |
|12    |`in``not in`                       |成员运算符                  |
|13    |`not``or``and`                     |逻辑运算符                  |

从上表可以看出，优先级：算术 > 比较 > 等于 > 赋值。初期先掌握最常用的就好。

如果同一优先级的运算符出现在同一行语句，怎么解决这个问题？有两个方法。一是按默认的从左到右的运算方向，二是使用括号 `()` 将需要优先运算的包含起来。在 Python 的运算里，`()` 才是真正的最高优先级。

## 3.3. 数据类型

包含数字在内，Python 有六个标准的数据类型，分别是：

* 数字（Number）
* 字符串（String）
* 列表（List）
* 元组（Tuple）
* 集合（Sets）
* 字典（Dictionary）

-

### 3.3.1. 数字（Number）

数字（Number）有四种数值类型：整型（int）、长整型（long）、浮点型（float）、复数（complex）。

* 整型（Int）：通常被称为整型或整数，包含正整数与负整数，即不带小数点的数。该型的数值有大小的限制。
* 长整型（Long integers）：无限大小的整数，在数字末尾加`L`来标识。
* 浮点型（Floating point real values）：由整数部分和小数部分组成。
* 复数（Complex numbers）：由实数与虚数组成，可以 a + bj，或complex(a, b) 表示。复数的实部 a 与虚部 b 都是浮点型。

> 注意：

> 1. Python 3.x 版本没有长整型，统一归为整型。

> 2. 混合计算时，Python 会自动把整型转换成浮点型。

-

### 3.3.2. 字符串（String）

使用单引号 ' '，或双引号 " " 将数字、字母、划线、空格等符号包括起来的数据类型就是字符串类型。在涉及到一些特殊符号时，使用反斜杠 `\` 进行转换，这个过程称为转义，`\` 称为转义符。

* 字符串格式：

```
s = "a1a2a3...an" (n > 0)
```

一段字符串里可能包含多个字符，如何进行指定性的截取？Python 制定了索引的规则，索引号以 0 为起始值，-1 代表末尾，即第一个字符的编号是 0，最后一个的编号是 -1。s 代表字符串，index 代表索引号，索引格式是 `s[index1:index2]`。截取时，有两种顺序，分别有各自的规则：

* 从左到右：默认从索引号0开始，到指定的索引号减1的位置。
* 从右到左：默认从-1开始，直到字符串开头。

注意，引号内的空格也是有意义的，算位数时不能只算符号。字符串的截取操作，所返回的结果的属性也是一个字符串。

加号`+`是字符串的连接运算符，可以将不同字符串连接到一起。星号 `*` 是重复操作的符号，表示打印的次数。

#### 示例

```
s1 = "I am a fish"
s2 = "I am a rock"
s3 = '0123456'

print s1
s1[-1]
print s1[-1]
print s3[0:3]
print s1 + s2
print s1 * 2
```

#### 输出结果

```
I am a fish               # 完整打印字符串
'h'                       # a[-1] 返回的结果是一个字符串
h                         # 使用 print 打印字符串，会自动去掉两端的引号
012                       # 按规则，s3[0:3]只截取到了2的位置。参见上述对顺序的说明
I am a fishI am a rock    # `+`将前后两个字符串的首尾相接，没有空格什么的。
I am a fishI am a fish
```

当需要一次性打印输出多行的字符串类型的信息时，我们可以将它们分拆成多句代码，但 Python 为我们提供了一种更便捷的方式，在两端使用 3 个`引号`，即可将字符串按输入格式进行输出，格式如下：

```
print """I am a fish.
I like eating cat.
I like strolling around sometime."""
```

#### 输出结果

```
I am a fish.
I like eating cat.
I like strolling around sometime.
```

当我说`引号`，这意味着双引号和单引号都可以使用，下面代码的输出结果同上：

```
print '''I am a fish.
I like eating cat.
I like strolling around sometime.'''
```

### 3.3.3. 列表（List）

使用`[]` 包括起来的数据称为列表（List），里面可以包含多种不同类型的数据，用逗号 `,` 隔开各个元素。列表可以进行元素的添加、删减等操作。

列表（List）是常用的数据类型，是一种内涵丰富的类型，可以根据规则构建出多种包含多个层级的、复杂的数据结构，比如列表 a 可以包含列表 b，b 又可以包含列表，实现一种称为「嵌套」的数据结构，比如 list = [a[b[...],...],...]。

和字符串一样，列表同样可以被索引和截取。对列表进行截取奥做时，如果截取的元素只有一个，那返回的结果的属性是字符串，如果截取的元素的数量大于 1，返回的结果则是一个新列表，这个新列表包含所截取的元素。索引号以 0 为起始，-1 表示末尾。进行截取操作时，遵从的顺序和规则与字符串的相同。

加号`+`是列表的连接运算符，可以将不同列表连接到一起。星号 `*` 是重复操作的符号，表示打印的次数。

#### 示例

```
list1 = ['name', 'fish', 'age', 18]
list2 = ['weight', 60]
list1[0]
print list1[0]
print list1[0:2]
print list1 + list2
print list2 * 2
```

#### 输出结果

```
‘name’
name
['name', 'fish']     # list[0:2] 实际截取的末位的索引号是 1。见上述关于顺序和规则的说明
['name', 'fish', 'age', 18, 'weight', 60]
['weight', 60, 'weight', 60]
```

### 3.3.4. 元组（Tuple）

使用 `()` 包括起来的数据称为 元组（Tuple），里面可以包含不同类型的数据，元素之间使用逗号 , 隔开。 创建的元组包含的元素为 0 个或 1 个时，情况有点特殊。

```
tuple01 = ()        # 空元组 
tuple02 = (233,)    # 只包含一个元素，末尾须加上一个逗号
```

元组与列表类似，区别在于元组的内部元素不能被修改，也就是说元组只能被读取、完整复制等，这个特点与字符串是一样的。而对比字符串和元组，实际上可把字符串看作一种特殊的元组，因为特点和使用方法多有相同之处。元组可以被索引和截取，以 0 起始，-1 代表末尾，方法同上。

虽然元组的元素本身不能被修改，但元组可以包含可变的对象，比如包含一个列表，可以对这个列表的元素进行操作，如修改。

加号`+`是元组的连接运算符。星号`*`是重复操作的符号。

字符串、列表、元组，这三种数据类型都称为 sequence（序列）。

#### 示例

```
tuple1 = ('name', 'fish', 'age', 18)
tuple2 = ('weight', 60)
tuple1[0]
print tuple1[0]
print tuple1[0:2]
print tuple1 + list2
print tuple2 * 2
```

#### 输出结果

```
‘name’
name
('name', 'fish')     # list[0:2] 实际截取的末位的索引号是 1。见上述关于顺序和规则的说明
('name', 'fish', 'age', 18, 'weight', 60)
('weight', 60, 'weight', 60)
```

> 因为特性类似，我连例子都是照搬列表的，除了把 `[]` 改成 `()`。

### 3.3.5. 字典（Dictionary）

使用{}包括起来的数据类型称为字典（dictionary，简称 dict），是另一种非常有用的数据类型，功能比列表还要丰富。跟列表类似，字典可包含多个、多种不同类型的数据，也可以实现嵌套的数据结构。

在列表里，元素之间是有顺序的，一个挨着一个。字典内的元素（称为 键值对）是没有顺序的，专业些说就是字典是无序的对象集合。

字符串、列表和元组都可以使用索引号进行存取，既然字典无序，字典怎么解决存取的问题？

首先，字典包含的元素都是两两配对的，也就是映射关系，其中前面一个称为键（key），后一个称为值（value），合称键值对，键值内部用分号:隔开，不同键值对之间用逗号隔开。一个字典里，键必须是不可变的类型，且必须是唯一的、不重复的，值的类型则没有规定。字典可以包含零个、一个乃至任意个键值对。存取时，通过指定的键来操作对应的值。

格式是：dict = {键:值, 键:值, ...}

#### 示例

```
dict = {'name':'zd', 'age':18, 'weight':60}
dict['age']
```

#### 输出结果

```
18
```

### 3.3.6. 集合（sets）

集合（Sets）是一个无序、不重复的元素的序列。使用大括号`{}`，或者函数`set()`进行创建。当创建的集合是一个空集合时，不能使用`{}`，只能使用`set()`。我们使用`{}`时，创建的是空字典，而不是空集合。

#### 示例

```
student = {'LiLi', 'Xiaomei', 'LiLi', 'LiLei', 'HanLei'}
print student
```

#### 输出结果

```
{'Xiaomei', 'LiLi', 'LiLei', 'HanLei'}    # 重复的元素`LiLi`被自动删减为一个
```

### 3.3.7. 其它类型

除了上面介绍的类型，还有一种特别的数据类型，名称是`空值`，用`None`表示。不能将这个值与`0`等同起来，无论是从字符串还是数字的方面来说，`0`都是有意义的，比方说`0`可以用来描述一些事实：0个苹果、0年经验、0元收入等，而 None 是一个特殊的值，代表的就是 空！就是什么都没有。初期可能难以理解空值的概念，需要多实践，从实践中去加深理解。


## 4. 小结

### 4.1 知识的复用性及知识（学习）迁移能力

上面的算术运算符有幂算号「**」，而赋值运算符表中有「`**=`」的符号。当学习了「+=」的意义后，我们应当联想到「`**=`」，并尝试推断出它的意义，猜想它的逻辑会不会跟「+=」的一样，然后通过实际的程序去验证我们的想法。

简单说，已学知识点与陌生知识点，或者说已知的与未知的东西往往存在着多方面、多层次的联系，这意味着知识具有复用性。进行这个过程的能力则称为知识（学习）的迁移能力，发挥迁移能力是为了将知识复用性的潜力挖掘出来，使自己更快更好地掌握知识。

当然，这个例子太小，似乎不足以说明什么问题，因为通过查看 Python 关于运算符的规范说明就可以获取完全正确、官方的定义，很多人可能认为这是「无用功」。根据我的惨痛经验，这种不以为然会让自己错过主动培养自己「大胆假设，小心求证」习惯的好机会。


## 5. 主要参考

1. 《笨办法学Python（第三版）》，Zed Shaw著
2. 网络
